doctype html
html(lang="ja")
  head
    meta(charset="UTF-8")
    link(rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous")
    title 匿名掲示板
  body.container.overflow-scrool
    nav.navbar.fixed-top.navbar-dark.bg-primary
      div.container-fluid
        h1.text-light.navbar-brand.mx-auto 匿名掲示板
        div.dropdown
          button.btn.btn-outline-light.dropdoen-toggle(type="button" id="menu" data-bs-toggle="dropdown" aria-expanded="false") #{user}
          ul.dropdown-menu.dropdown-menu-end(aria-labelledby="menu")
            li
              a.dropdown-item(href="/logout") ログアウト
    form(method="post" action="/posts")
      div
        textarea(name="content" cols="40" rows="4")
      div
        button(type="submit") 投稿する
    h2 投稿一覧
    each post in posts
      p #{post.postedBy}
      p 送信日時: #{post.createdAt}
      p!=post.content
      - const isDeletable = (user === post.postedBy || user === 'admin')
      if isDeletable
        form(method="post" action="/posts/delete")
          input(type="hidden" name="id" value=post.id)
          button(type="submit") 削除する
      hr
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous")
